# FOC控制基础

## 电流采样及校准

## 1_1 采样值和电流值的换算关系
### 1_1_1 ADC值与电压的关系
ADC值是通过模数转换器（ADC）将模拟电压信号转换为数字值。假设ADC的分辨率为`N`位，参考电压为$V_{ref}$，则ADC值与电压的关系为：
\[ V_{adc} = \frac{V_{ref}}{2^N} \times \text{ADC值} \]
### 1_1_2 电压与电流的关系
在FOC中，电流通常是通过分流电阻（shunt resistor）测量的。假设分流电阻的阻值为$R_s$，则通过分流电阻的电压降与电流的关系为：
\[ V_{adc} = I \times R_s \]
### 1_1_3 综合公式
将上述两个公式结合，可以得到ADC值与实际电流的关系：
\[ I = \frac{V_{adc}}{R_s} = \frac{\frac{V_{ref}}{2^N} \times \text{ADC值}}{R_s} \]
简化后得到：
\[ I = \frac{V_{ref}}{2^N \times R_s} \times \text{ADC值} \]

## 1_2相电流频率公式
根据电机的极对数 \( p = 5 \) 和机械转速 \( n_m = 1000  \text{RPM} \)，相电流频率 \( f_e \) 的计算公式如下：
在 FOC 控制中，相电流频率（电气频率）与机械转速的关系为：
\[
f_e = \frac{p \times n_m}{60}  \text{[Hz]}
\]

### 1_2_1 参数代入
- 极对数 \( p = 5 \)
- 机械转速 \( n_m = 1000  \text{RPM} \)

### 1_2_2 计算过程
\[
f_e = \frac{5 \times 1000}{60} = \frac{5000}{60} = \frac{500}{6} \approx 83.333  \text{Hz}
\]

### 表1-1
| 转速 (RPM) | 极对数 (P) | 相电流频率 (Hz) | 计算公式              |
|-----------|-----------|----------------|----------------------|
| 1         | 2         | 0.033          | \( f_e = \frac{2 \times 1}{60} \) |
| 1         | 4         | 0.067          | \( f_e = \frac{4 \times 1}{60} \) |
| 1         | 5         | 0.083          | \( f_e = \frac{5 \times 1}{60} \) |
| 1         | 7         | 0.117          | \( f_e = \frac{7 \times 1}{60} \) |
| 1         | 15        | 0.250          | \( f_e = \frac{15 \times 1}{60} \) |
| 100       | 2         | 3.333          | \( f_e = \frac{2 \times 100}{60} \) |
| 100       | 4         | 6.667          | \( f_e = \frac{4 \times 100}{60} \) |
| 100       | 5         | 8.333          | \( f_e = \frac{5 \times 100}{60} \) |
| 100       | 7         | 11.667         | \( f_e = \frac{7 \times 100}{60} \) |
| 100       | 15        | 25.000         | \( f_e = \frac{15 \times 100}{60} \) |
| 1000      | 2         | 33.333         | \( f_e = \frac{2 \times 1000}{60} \) |
| 1000      | 4         | 66.667         | \( f_e = \frac{4 \times 1000}{60} \) |
| 1000      | 5         | 83.333         | \( f_e = \frac{5 \times 1000}{60} \) |
| 1000      | 7         | 116.667        | \( f_e = \frac{7 \times 1000}{60} \) |
| 1000      | 15        | 250.000        | \( f_e = \frac{15 \times 1000}{60} \) |
| 3000      | 2         | 100.000        | \( f_e = \frac{2 \times 3000}{60} \) |
| 3000      | 4         | 200.000        | \( f_e = \frac{4 \times 3000}{60} \) |
| 3000      | 5         | 250.000        | \( f_e = \frac{5 \times 3000}{60} \) |
| 3000      | 7         | 350.000        | \( f_e = \frac{7 \times 3000}{60} \) |
| 3000      | 15        | 750.000        | \( f_e = \frac{15 \times 3000}{60} \) |


